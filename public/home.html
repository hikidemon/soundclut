<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Feed</title>
 
    <style >
/* Reset basic styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Arial, sans-serif;
  color: #333;
  background-color: #f8f8f8;
}

/* Top Navigation Bar */
.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #333;
  padding: 10px 20px;
  color: white;
}

.navbar-logo {
  font-size: 24px;
  font-weight: bold;
}

.search-bar {
  width: 40%;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
}

.navbar-links a {
  color: white;
  margin-left: 15px;
  text-decoration: none;
}

.navbar-links a:hover {
  text-decoration: underline;
}

/* Main Content Layout */
.content {
  display: flex;
  padding: 20px;
}

.sidebar {
  width: 20%;
  background-color: #fff;
  padding: 15px;
  border-radius: 4px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
}

.sidebar h2 {
  margin-bottom: 15px;
}

.sidebar ul {
  list-style: none;
}

.sidebar li {
  margin: 10px 0;
}

.sidebar a {
  color: #333;
  text-decoration: none;
}

.sidebar a:hover {
  text-decoration: underline;
}

/* Feed Section */
.feed {
  width: 70%;
  margin-left: 20px;
}

.feed h2 {
  margin-bottom: 20px;
}

.post {
  background-color: #fff;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 4px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
}

.post-title {
  font-size: 18px;
  font-weight: bold;
}

.post-author {
  font-size: 14px;
  color: #666;
}

.post-tags {
  font-size: 12px;
  color: #999;
}

.like-button, .comment-button {
  margin-top: 10px;
  padding: 5px 10px;
  background-color: #ff7700;
  border: none;
  border-radius: 4px;
  color: white;
  cursor: pointer;
}

.like-button:hover, .comment-button:hover {
  background-color: #e06600;
}


    </style>
</head>
<body>
  <header class="navbar">
    <div class="navbar-logo">MusicFeed</div>
    <input type="text" class="search-bar" placeholder="Search for tracks, artists, and more">
    <div class="navbar-links">
      <a href="#home">Home</a>
      <a href="#feed">Feed</a>
      <a href="#profile">Profile</a>
    </div>
  </header>

  <main class="content">
    <aside class="sidebar">
      <h2>Explore</h2>
      <ul>
        <li><a href="#genres">Genres</a></li>
        <li><a href="#trending">Trending</a></li>
        <li><a href="#new">New Releases</a></li>
      </ul>
    </aside>

    <section class="feed">
      <h2>Feed</h2>
      <div id="posts-container">
        <div id="posts"></div>

<!-- –¢–æ—Å—Ç –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
<div id="commentToast" style="display: none;">
  <textarea id="commentText" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
  <button id="sendCommentBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  <button id="cancelCommentBtn">–û—Ç–º–µ–Ω–∏—Ç—å</button>
</div>

      </div>
    </section>
  </main>

    <footer>
        <p>&copy; 2024 –í–∞—à –°–µ—Ä–≤–∏—Å</p>
    </footer>
    <script>
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤ –∏–∑ API –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      async function loadPosts() {
        try {
          const response = await fetch('/api/posts');
          const posts = await response.json();
  
          const postsContainer = document.getElementById('posts-container');
          postsContainer.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤
  
          posts.forEach(post => {
            const postElement = document.createElement('div');
            postElement.classList.add('post');
            
            postElement.innerHTML = `
              <h3 class="post-title">${post.title}</h3>
              <p class="post-author">by ${post.author}</p>
              <p class="post-tags">${post.tags}</p>
              <button class="like-button" onclick="likePost(${post.id})">‚ù§Ô∏è Like (${post.likes})</button>
              <button class="comment-button" data-post-id="${post.id}">üí¨ Comment</button>

            `;
  
            postsContainer.appendChild(postElement);
          });
        } catch (error) {
          console.error('Error loading posts:', error);
        }
      }
  
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–∞–π–∫–∞ –ø–æ—Å—Ç–∞
      async function likePost(postId) {
        try {
          await fetch(`/api/posts/${postId}/like`, { method: 'POST' });
          loadPosts(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ –ª–∞–π–∫–∞
        } catch (error) {
          console.error('Error liking post:', error);
        }
      }
  
      // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      document.addEventListener('DOMContentLoaded', loadPosts);
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
document.addEventListener('click', async (event) => {
  if (event.target.matches('.comment-button')) {
    const postId = event.target.dataset.postId; // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ—Å—Ç–∞
    showCommentToast(postId);
  }
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ—Å—Ç–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
function showCommentToast(postId) {
  const toast = document.getElementById('commentToast');
  toast.style.display = 'block';

  const sendCommentBtn = document.getElementById('sendCommentBtn');
  const cancelCommentBtn = document.getElementById('cancelCommentBtn');
  const commentText = document.getElementById('commentText');

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  sendCommentBtn.onclick = async () => {
    const comment = commentText.value;

    try {
      const response = await fetch(`/api/posts/${postId}/comments`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ comment }),
      });

      if (response.ok) {
        const data = await response.json();
        console.log('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω:', data);
        // –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
      } else {
        const errorData = await response.json();
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:', errorData);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:', error);
    }

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–æ—Å—Ç
    toast.style.display = 'none';
    commentText.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–º–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  cancelCommentBtn.onclick = () => {
    toast.style.display = 'none';
    commentText.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
  };
}

    </script>
</body>
</html>
